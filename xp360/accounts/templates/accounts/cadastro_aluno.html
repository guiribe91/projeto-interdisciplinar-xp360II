{% load static %}
<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Aluno â€¢ XP360</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- CSS Personalizado -->
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
</head>

<body class="register-page">

    <!-- Background decorativo -->
    <div class="register-background">
        <div class="bg-shape shape-1"></div>
        <div class="bg-shape shape-2"></div>
        <div class="bg-shape shape-3"></div>
    </div>

    <!-- Container -->
    <div class="register-container">

        <!-- Card de Cadastro -->
        <div class="register-card">

            <!-- Header -->
            <div class="register-header">
                <div class="register-icon">ğŸ“</div>
                <h2 class="register-title">Cadastro de Aluno</h2>
                <p class="register-subtitle">Junte-se Ã  plataforma e comece sua jornada de aprendizado</p>
            </div>

            <!-- Mensagem de Erro -->
            {% if erro %}
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <strong>Erro:</strong> {{ erro }}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
            {% endif %}

            <!-- FormulÃ¡rio -->
            <form method="POST" class="register-form" id="formCadastro">
                {% csrf_token %}

                <div class="form-group-modern">
                    <label class="form-label-modern">
                        <span class="label-icon">ğŸ‘¤</span>
                        Nome de UsuÃ¡rio
                    </label>
                    <input 
                        type="text" 
                        name="username" 
                        class="form-control-modern" 
                        required 
                        placeholder="Digite seu nome de usuÃ¡rio"
                        autocomplete="username"
                    >
                    <small class="form-hint">Este serÃ¡ seu identificador na plataforma</small>
                </div>

                <div class="form-group-modern">
                    <label class="form-label-modern">
                        <span class="label-icon">âœ‰ï¸</span>
                        E-mail
                    </label>
                    <input 
                        type="email" 
                        name="email" 
                        class="form-control-modern" 
                        required 
                        placeholder="seu.email@exemplo.com"
                        autocomplete="email"
                    >
                    <small class="form-hint">Usaremos para recuperaÃ§Ã£o de senha</small>
                </div>

                <div class="form-group-modern">
                    <label class="form-label-modern">
                        <span class="label-icon">ğŸ”’</span>
                        Senha
                    </label>
                    <input 
                        type="password" 
                        name="password" 
                        class="form-control-modern" 
                        required 
                        placeholder="Crie uma senha forte"
                        autocomplete="new-password"
                        minlength="8"
                    >
                    <small class="form-hint">MÃ­nimo de 8 caracteres</small>
                </div>

                <!-- âœ¨ SeleÃ§Ã£o de Turmas com Checkboxes Modernos -->
                <div class="form-group-modern">
                    <label class="form-label-modern">
                        <span class="label-icon">ğŸ«</span>
                        Turma(s)
                        <span class="turmas-count" id="turmasCount">(0 selecionadas)</span>
                    </label>
                    
                    <div class="turmas-checkbox-container">
                        {% for turma in turmas %}
                        <label class="turma-checkbox-item">
                            <input 
                                type="checkbox" 
                                name="turmas" 
                                value="{{ turma.id }}"
                                class="turma-checkbox-input"
                            >
                            <span class="turma-checkbox-custom">
                                <span class="turma-checkbox-check">âœ“</span>
                            </span>
                            <span class="turma-checkbox-label">
                                <strong>{{ turma.nome }}</strong>
                                <small>{{ turma.serie }}</small>
                            </span>
                        </label>
                        {% endfor %}
                    </div>
                    
                    <small class="form-hint">Selecione uma ou mais turmas que vocÃª deseja participar</small>
                    <div id="errorTurmas" class="error-message" style="display: none;">
                        âš ï¸ Selecione pelo menos uma turma
                    </div>
                </div>

                <!-- Adicionar logo antes do botÃ£o "Criar minha conta" -->

<!-- Checkbox de Termos de Uso -->
<div class="form-group-modern">
    <label class="checkbox-modern">
        <input 
            type="checkbox" 
            name="aceito_termos" 
            id="aceito_termos" 
            required
            class="checkbox-input"
        >
        <span class="checkbox-custom">
            <span class="checkbox-check">âœ“</span>
        </span>
        <span class="checkbox-label">
            Concordo com os 
            <a href="{% url 'termos_uso' %}" target="_blank" class="link-primary">Termos de Uso</a>
            e a
            <a href="{% url 'politica_privacidade' %}" target="_blank" class="link-primary">PolÃ­tica de Privacidade</a>
        </span>
    </label>
</div>
                

                <button type="submit" class="btn-register">
                    <span>Criar minha conta</span>
                    <span class="btn-icon">â†’</span>
                </button>

            </form>

            <!-- Divisor -->
            <div class="register-divider">
                <span>JÃ¡ tem uma conta?</span>
            </div>

            <!-- Link de Login -->
            <a href="{% url 'login' %}" class="btn-secondary-register">

                <span class="btn-icon">â†</span>
                <span>Voltar ao login</span>
            </a>

        </div>

        <!-- Features -->
        <div class="register-features">
            <div class="feature-item">
                <span class="feature-icon">ğŸ¯</span>
                <span class="feature-text">MissÃµes diÃ¡rias personalizadas</span>
            </div>
            <div class="feature-item">
                <span class="feature-icon">ğŸ†</span>
                <span class="feature-text">Sistema de conquistas e badges</span>
            </div>
            <div class="feature-item">
                <span class="feature-icon">ğŸ“Š</span>
                <span class="feature-text">Acompanhe seu progresso</span>
            </div>
        </div>

    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- JavaScript para validaÃ§Ã£o e contador -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('formCadastro');
            const checkboxes = document.querySelectorAll('.turma-checkbox-input');
            const counter = document.getElementById('turmasCount');
            const errorMsg = document.getElementById('errorTurmas');
            
            // Atualizar contador quando checkbox mudar
            function updateCounter() {
                const checkedCount = document.querySelectorAll('.turma-checkbox-input:checked').length;
                counter.textContent = `(${checkedCount} selecionada${checkedCount !== 1 ? 's' : ''})`;
                
                if (checkedCount > 0) {
                    errorMsg.style.display = 'none';
                }
            }
            
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updateCounter);
            });
            
            // ValidaÃ§Ã£o ao submeter
            form.addEventListener('submit', function(e) {
                const checkedCount = document.querySelectorAll('.turma-checkbox-input:checked').length;
                
                if (checkedCount === 0) {
                    e.preventDefault();
                    errorMsg.style.display = 'block';
                    
                    // Scroll para a mensagem de erro
                    errorMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    
                    return false;
                }
            });
            
            // AnimaÃ§Ã£o inicial
            document.querySelectorAll('.turma-checkbox-item').forEach((item, index) => {
                item.style.animationDelay = `${index * 0.05}s`;
            });
        });
    </script>

</body>
</html> 
